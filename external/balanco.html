<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <title>Balanço de Estoque</title>
  <link rel="icon" href="bsb/favicon.ico" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&subset=latin,cyrillic-ext" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">
  <link href="bsb/plugins/bootstrap/css/bootstrap.css" rel="stylesheet">
  <link href="bsb/plugins/node-waves/waves.css" rel="stylesheet">
  <link href="bsb/plugins/animate-css/animate.css" rel="stylesheet">
  <link href="bsb/plugins/jquery-datatable/skin/bootstrap/css/dataTables.bootstrap.css" rel="stylesheet">
  <link href="bsb/css/style.css" rel="stylesheet">
  <link href="bsb/css/themes/all-themes.css" rel="stylesheet">
  <style>
    @media (max-width: 768px) {
      .container-fluid {
        display: flex;
        flex-direction: column; /* Empilhar os elementos */
      }
      .col-lg-3, .col-md-3 {
        order: 1; /* Mover o bloco esquerdo para cima */
        width: 100%; /* Ajustar largura */
      }
      .col-lg-9, .col-md-9 {
        order: 2; /* Mover o bloco direito para baixo */
        width: 100%; /* Ajustar largura */
      }
    }
    /* Adicionando espaçamento ao topo */
    .card {
      margin-top: 20px; /* Espaçamento superior */
    }
    .header {
      margin-bottom: 15px; /* Espaçamento abaixo do cabeçalho */
    }
  </style>
</head>
<body class="theme-blue">

<!-- Conteúdo da página -->
<div class="container-fluid">
  <div class="row clearfix">
    <!-- Lado Esquerdo (Formulário) -->
    <div class="col-lg-3 col-md-3 col-sm-12">
      <div class="card">
        <div class="header">
          <h2>Modelo de Balanço</h2>
        </div>
        <div class="body">
          <!-- Nome do modelo -->
          <div class="form-group">
            <label for="modelName">Nome do Modelo:</label>
            <input type="text" id="modelName" class="form-control" oninput="generateTag()">
          </div>
          <!-- Tag do modelo -->
          <div class="form-group">
            <label for="modelTag">Tag:</label>
            <input type="text" id="modelTag" class="form-control" readonly>
          </div>
          <!-- Data -->
          <div class="form-group">
            <label for="currentDate">Data:</label>
            <input type="date" id="currentDate" class="form-control">
          </div>
        </div>
      </div>
    </div>

    <!-- Lado Direito (Tabela de Categorias) -->
    <div class="col-lg-9 col-md-9 col-sm-12">
      <div class="card">
        <div class="header">
          <h2>Balanço</h2>
        </div>
        <div class="body">
          <button id="btnAddCategory" class="btn btn-primary" style="margin-bottom: 15px;">Adicionar Categorias</button>
          <div class="table-responsive">
            <table id="balancoTable" class="table table-bordered table-striped">
              <thead>
              <tr>
                <th>Código</th>
                <th>Categoria</th>
                <th>Unidade</th>
                <th>Ação</th>
              </tr>
              </thead>
              <tbody>
              <!-- Dados dinâmicos -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <!-- Rodapé com botões de ação -->
      <div class="footer text-right">
        <button id="limparBalanco" class="btn btn-warning">Limpar</button>
        <button id="finalizarLancamento" class="btn btn-success">Finalizar Lançamento</button> <!-- Botão para finalizar -->
      </div>
    </div>
  </div>
</div>

<!-- Modal para seleção de categorias -->
<div class="modal fade" id="modalCategoria" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Selecionar Categoria</h4>
      </div>
      <div class="modal-body">
        <!-- Campo de pesquisa -->
        <div class="form-group">
          <input type="text" id="searchCategory" class="form-control" placeholder="Pesquisar pela categoria" onkeyup="filterCategories()">
        </div>
        <table id="categoriasTable" class="table table-bordered table-striped">
          <thead>
          <tr>
            <th>Código</th>
            <th>Nome</th>
            <th>Unidade</th>
            <th>Ação</th>
          </tr>
          </thead>
          <tbody>
          <!-- Dados dinâmicos de categorias -->
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-link waves-effect" data-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>

<!-- Jquery Core Js -->
<script src="bsb/plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap Core Js -->
<script src="bsb/plugins/bootstrap/js/bootstrap.js"></script>
<!-- Waves Effect Plugin Js -->
<script src="bsb/plugins/node-waves/waves.js"></script>
<!-- Jquery DataTable Plugin Js -->
<script src="bsb/plugins/jquery-datatable/jquery.dataTables.js"></script>
<script src="bsb/plugins/jquery-datatable/skin/bootstrap/js/dataTables.bootstrap.js"></script>
<!-- Axios for API requests -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<!-- Custom Script -->
<script src="script/balanco.js"></script>

<script>
  // Função para gerar a tag a partir do nome do modelo
  function generateTag() {
    const modelName = document.getElementById("modelName").value;
    const modelTag = modelName.toLowerCase().replace(/\s+/g, '-');
    document.getElementById("modelTag").value = modelTag;
  }

  // Filtro para categorias
  function filterCategories() {
    const input = document.getElementById("searchCategory");
    const filter = input.value.toLowerCase();
    const table = document.getElementById("categoriasTable");
    const tr = table.getElementsByTagName("tr");

    for (let i = 1; i < tr.length; i++) {
      const td = tr[i].getElementsByTagName("td")[1]; // Nome da categoria
      if (td) {
        const txtValue = td.textContent || td.innerText;
        tr[i].style.display = txtValue.toLowerCase().indexOf(filter) > -1 ? "" : "none";
      }
    }
  }
</script>

</body>
</html>
